/* 包含相关的头文件 */#include <stdio.h>#include <stdlib.h>#include <netinet/in.h>#include <arpa/inet.h>#include <unistd.h>#include <sys/types.h>#include <sys/socket.h>#include <strings.h>//#include <pthread.h>/* 定义一个端口号 */#define LOCAL_PORT 4568// UPD serverint main(int argc, char *argv[]) {    /* 定义相关的变量 */    int my_sock, len;    struct sockaddr_in serv_addr;    int i = 0;    /* 定义一个数组，保存发送与接收的信息 */    char my_buffer[256];    int sin_size;    /* 建立一个连接 */    if ((my_sock = socket(AF_INET, SOCK_DGRAM, 0)) < 0) {        /* 输出错误 */        perror("error");        exit(1);    } else {        /* socket建立成功则提示信息 */        printf("socket created.\n");        printf("socked id: %d \n", my_sock);    }    /* 清空地址所在的内存 */    bzero(&serv_addr, sizeof(serv_addr));    /* 填充地址结构体 */    serv_addr.sin_family = AF_INET;    serv_addr.sin_port = htons(LOCAL_PORT);    serv_addr.sin_addr.s_addr = htonl(INADDR_ANY);    /* 在socket上面绑定端口与IP */    if (bind(my_sock, (struct sockaddr*)&serv_addr, sizeof(serv_addr)) < 0) {        /* 输出错误信息 */        perror("connect");        exit(1);    } else {        /* 绑定成功则输出信息 */        printf("bind ok.\n");        printf("local port:%d \n", LOCAL_PORT);    }    /* 进入一个循环 */    while (1) {        /* 清空my_buffer所在的内存 */        bzero(my_buffer, sizeof(my_buffer));        /* 长度 */        sin_size = sizeof(struct sockaddr_in);        /* 接收到信息 */        len = recvfrom(my_sock, my_buffer, sizeof(my_buffer), 0, (struct sockaddr*)&serv_addr, &sin_size);        /* 输出计数 */        printf("%d:", i);        /* 计数自加 */        i++;        /* 输出IP地址 */        printf("message from %s:%d\n", inet_ntoa(serv_addr.sin_addr), ntohs(serv_addr.sin_port));        /* 输出长度信息 */        printf("message length: %d \n", len);        /* 输出信息 */        printf("message: %s \n\n", my_buffer);        /* 以上将字符串返回给客户端 */        sendto(my_sock, my_buffer, len, 0, (struct sockaddr*)&serv_addr, sin_size);    }}